[
    {
        "label": "#1",
        "msgs": {
            "a393abc0-283d-4c9b-a1b3-641a035c34bf": {
                "urn": "tel:+16055741111",
                "channel": {
                    "uuid": "74729f45-7f29-4868-9dc4-90e491e3c7d8",
                    "name": "Twilio"
                },
                "text": "start"
            }
        },
        "actions": {
            "a393abc0-283d-4c9b-a1b3-641a035c34bf": [
                {
                    "type": "send_msg",
                    "uuid": "088eddd3-b09c-477a-a9c2-2239445b0c48",
                    "text": "Hello World",
                    "quick_replies": [
                        "yes",
                        "no"
                    ],
                    "all_urns": true
                }
            ],
            "b699a406-7e44-49be-9f01-1a82893e8a10": [
                {
                    "type": "send_msg",
                    "uuid": "2c18d3c0-2500-4aeb-a4c3-d5d701c80809",
                    "text": "No URNs"
                }
            ],
            "cd024bcd-f473-4719-a00a-bd0bb1190135": [
                {
                    "type": "send_msg",
                    "uuid": "ad680782-a90c-4a9f-b2a8-d0c8708a367b",
                    "text": "Hello Attachments",
                    "attachments": [
                        "image/png:/images/image1.png"
                    ],
                    "all_urns": true
                }
            ],
            "d709c157-4606-4d41-9df3-9e9c9b4ae2d4": [
                {
                    "type": "send_msg",
                    "uuid": "64f31435-5f0a-4586-a748-156ad708e0ce",
                    "text": "Template time",
                    "template": {
                        "uuid": "9c22b594-fcab-4b29-9bcb-ce4404894a80",
                        "name": "revive_issue"
                    },
                    "template_variables": [
                        "@contact.name",
                        "tooth"
                    ]
                }
            ]
        },
        "db_assertions": [
            {
                "query": "SELECT COUNT(*) FROM msgs_msg WHERE text='Hello World' AND contact_id = $1 AND quick_replies[1] = 'yes' AND quick_replies[2] = 'no' AND high_priority = TRUE",
                "args": [
                    10000
                ],
                "returns": 2
            },
            {
                "query": "SELECT COUNT(*) FROM msgs_msg WHERE text='Hello Attachments' AND contact_id = $1 AND attachments[1] = $2 AND status = 'Q' AND high_priority = FALSE",
                "args": [
                    10002,
                    "image/png:https://foo.bar.com/images/image1.png"
                ],
                "returns": 1
            },
            {
                "query": "SELECT COUNT(*) FROM msgs_msg WHERE contact_id=$1 AND STATUS = 'F' AND failed_reason = 'D';",
                "args": [
                    10001
                ],
                "returns": 1
            },
            {
                "query": "SELECT COUNT(*) FROM msgs_msg WHERE contact_id = $1 AND text = $2 AND direction = 'O' AND status = 'Q' AND channel_id = $3 AND templating-\u003e'template'-\u003e\u003e'name' = 'revive_issue'",
                "args": [
                    10003,
                    "Hi Dan, are you still experiencing problems with tooth?",
                    10002
                ],
                "returns": 1
            }
        ],
        "expected_history": [
            {
                "PK": "con#b699a406-7e44-49be-9f01-1a82893e8a10",
                "SK": "evt#01969b47-7ab3-76f8-92ca-6e1d7f550554",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:16.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-76cb-76f8-92e8-a5e406ecb2a7",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#b699a406-7e44-49be-9f01-1a82893e8a10",
                "SK": "evt#01969b47-99f3-76f8-bfd7-d22404241e07",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:24.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-76cb-76f8-92e8-a5e406ecb2a7",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#d709c157-4606-4d41-9df3-9e9c9b4ae2d4",
                "SK": "evt#01969b48-036b-76f8-bf05-63393fd408f5",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:51.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-ff83-76f8-9e14-020037f6ddea",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#d709c157-4606-4d41-9df3-9e9c9b4ae2d4",
                "SK": "evt#01969b48-22ab-76f8-b8ba-60d66db82e39",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:59.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-ff83-76f8-9e14-020037f6ddea",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-bd1b-76f8-a5ef-59cf4d9d7a5b",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:33.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-b933-76f8-a09e-6806aab9f510",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-dc5b-76f8-87bc-209e78511534",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:41.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-b933-76f8-a09e-6806aab9f510",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-24c3-76f8-bef6-3979f99a96f9",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:30:54.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-20db-76f8-9014-2c868db4022e",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-4fbb-76f8-8f9d-465efd6fbb5e",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:05.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-20db-76f8-9014-2c868db4022e",
                    "status": "completed",
                    "type": "run_ended"
                }
            }
        ]
    }
]