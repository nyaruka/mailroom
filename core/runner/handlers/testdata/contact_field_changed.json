[
    {
        "label": "#1",
        "actions": {
            "a393abc0-283d-4c9b-a1b3-641a035c34bf": [
                {
                    "type": "set_contact_field",
                    "uuid": "3f3727ac-f835-423f-9c6b-be7056220c9b",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "value": "Male"
                },
                {
                    "type": "set_contact_field",
                    "uuid": "8d6b2309-b112-478d-8168-540868d3a832",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "value": "Female"
                },
                {
                    "type": "set_contact_field",
                    "uuid": "ba2b0ac7-9593-4553-90d7-b1d977b44e4c",
                    "field": {
                        "key": "age",
                        "name": "Age"
                    },
                    "value": ""
                }
            ],
            "b699a406-7e44-49be-9f01-1a82893e8a10": [
                {
                    "type": "set_contact_field",
                    "uuid": "92435a07-39cc-49c5-9a75-09ebb892c43e",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "value": ""
                },
                {
                    "type": "set_contact_field",
                    "uuid": "7dc1bd75-078f-4296-8029-bcdc4d23efd2",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "value": "Male"
                },
                {
                    "type": "set_contact_field",
                    "uuid": "2a9f6605-b492-4d2a-acb0-8a5823ca83ac",
                    "field": {
                        "key": "age",
                        "name": "Age"
                    },
                    "value": "Old"
                }
            ],
            "cd024bcd-f473-4719-a00a-bd0bb1190135": [
                {
                    "type": "set_contact_field",
                    "uuid": "756ed088-f4c7-4e5f-8e95-8c52a3b8cdcc",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "value": "Male"
                },
                {
                    "type": "set_contact_field",
                    "uuid": "09f12e43-6776-4b6c-a66f-0e45e3e2e888",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "value": ""
                },
                {
                    "type": "set_contact_field",
                    "uuid": "c9b60530-3865-4abc-8cb9-bd6b699dffac",
                    "field": {
                        "key": "age",
                        "name": "Age"
                    },
                    "value": "40"
                }
            ],
            "d709c157-4606-4d41-9df3-9e9c9b4ae2d4": [
                {
                    "type": "set_contact_field",
                    "uuid": "5e46c396-e16d-4dd8-9c2e-2a4fa015c001",
                    "field": {
                        "key": "age",
                        "name": "Age"
                    },
                    "value": ""
                },
                {
                    "type": "set_contact_field",
                    "uuid": "3bb1610d-347b-4597-a542-450f0548e044",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "value": ""
                }
            ]
        },
        "db_assertions": [
            {
                "query": "select count(*) from contacts_contact where id = $1 AND fields-\u003e$2 = '{\"text\":\"Female\"}'::jsonb",
                "args": [
                    10000,
                    "3a5891e4-756e-4dc9-8e12-b7a766168824"
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contact where id = $1 AND NOT fields?$2",
                "args": [
                    10000,
                    "903f51da-2717-47c7-a0d3-f2f32877013d"
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contact where id = $1 AND NOT fields?$2",
                "args": [
                    10002,
                    "3a5891e4-756e-4dc9-8e12-b7a766168824"
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contact where id = $1 AND fields-\u003e$2 = '{\"text\":\"40\", \"number\": 40}'::jsonb",
                "args": [
                    10002,
                    "903f51da-2717-47c7-a0d3-f2f32877013d"
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contact where id = $1 AND fields-\u003e$2 = '{\"text\":\"Male\"}'::jsonb",
                "args": [
                    10001,
                    "3a5891e4-756e-4dc9-8e12-b7a766168824"
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contact where id = $1 AND fields-\u003e$2 = '{\"text\":\"Old\"}'::jsonb",
                "args": [
                    10001,
                    "903f51da-2717-47c7-a0d3-f2f32877013d"
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contact where id = $1 AND NOT fields?$2",
                "args": [
                    10001,
                    "unknown"
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contact where id = $1 AND fields = '{}'",
                "args": [
                    10003
                ],
                "returns": 1
            }
        ],
        "expected_history": [
            {
                "PK": "con#b699a406-7e44-49be-9f01-1a82893e8a10",
                "SK": "evt#01969b47-6b13-76f8-977d-88574316827e",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:12.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-672b-76f8-a8fd-1537ca860f97",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#b699a406-7e44-49be-9f01-1a82893e8a10",
                "SK": "evt#01969b47-8283-76f8-9803-f4a851d20f2b",
                "OrgID": 1,
                "TTL": "2026-05-04T12:31:18Z",
                "Data": {
                    "created_on": "2025-05-04T12:31:18.123456789Z",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "type": "contact_field_changed",
                    "value": {
                        "text": "Male"
                    }
                }
            },
            {
                "PK": "con#b699a406-7e44-49be-9f01-1a82893e8a10",
                "SK": "evt#01969b47-8e3b-76f8-8b56-5e92bbfe0e3f",
                "OrgID": 1,
                "TTL": "2026-05-04T12:31:21Z",
                "Data": {
                    "created_on": "2025-05-04T12:31:21.123456789Z",
                    "field": {
                        "key": "age",
                        "name": "Age"
                    },
                    "type": "contact_field_changed",
                    "value": {
                        "text": "Old"
                    }
                }
            },
            {
                "PK": "con#b699a406-7e44-49be-9f01-1a82893e8a10",
                "SK": "evt#01969b47-99f3-76f8-a71b-fe4af29b871a",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:24.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-672b-76f8-a8fd-1537ca860f97",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#d709c157-4606-4d41-9df3-9e9c9b4ae2d4",
                "SK": "evt#01969b48-16f3-76f8-be22-6e6983962829",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:56.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b48-130b-76f8-bf05-63393fd408f5",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#d709c157-4606-4d41-9df3-9e9c9b4ae2d4",
                "SK": "evt#01969b48-2a7b-76f8-b8ba-60d66db82e39",
                "OrgID": 1,
                "TTL": "2026-05-04T12:32:01Z",
                "Data": {
                    "created_on": "2025-05-04T12:32:01.123456789Z",
                    "field": {
                        "key": "age",
                        "name": "Age"
                    },
                    "type": "contact_field_changed",
                    "value": null
                }
            },
            {
                "PK": "con#d709c157-4606-4d41-9df3-9e9c9b4ae2d4",
                "SK": "evt#01969b48-324b-76f8-8c2c-eb689cc91cf8",
                "OrgID": 1,
                "TTL": "2026-05-04T12:32:03Z",
                "Data": {
                    "created_on": "2025-05-04T12:32:03.123456789Z",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "type": "contact_field_changed",
                    "value": null
                }
            },
            {
                "PK": "con#d709c157-4606-4d41-9df3-9e9c9b4ae2d4",
                "SK": "evt#01969b48-3e03-76f8-92f0-b4a6fcc7080c",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:32:06.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b48-130b-76f8-bf05-63393fd408f5",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-bd1b-76f8-a09e-6806aab9f510",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:33.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-b933-76f8-acdc-e181352d44cc",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-d48b-76f8-9504-776e7d151101",
                "OrgID": 1,
                "TTL": "2026-05-04T12:31:39Z",
                "Data": {
                    "created_on": "2025-05-04T12:31:39.123456789Z",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "type": "contact_field_changed",
                    "value": {
                        "text": "Male"
                    }
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-dc5b-76f8-998e-ae5bd773804a",
                "OrgID": 1,
                "TTL": "2026-05-04T12:31:41Z",
                "Data": {
                    "created_on": "2025-05-04T12:31:41.123456789Z",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "type": "contact_field_changed",
                    "value": null
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-e813-76f8-87bc-209e78511534",
                "OrgID": 1,
                "TTL": "2026-05-04T12:31:44Z",
                "Data": {
                    "created_on": "2025-05-04T12:31:44.123456789Z",
                    "field": {
                        "key": "age",
                        "name": "Age"
                    },
                    "type": "contact_field_changed",
                    "value": {
                        "number": 40,
                        "text": "40"
                    }
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-f3cb-76f8-8a34-b008aed3f772",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:47.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-b933-76f8-acdc-e181352d44cc",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-190b-76f8-a13f-9238de2a0b76",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:30:51.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-1523-76f8-aaa3-04d3fbce5f9a",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-307b-76f8-ba91-c48ad8c50e6b",
                "OrgID": 1,
                "TTL": "2026-05-04T12:30:57Z",
                "Data": {
                    "created_on": "2025-05-04T12:30:57.123456789Z",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "type": "contact_field_changed",
                    "value": {
                        "text": "Male"
                    }
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-3c33-76f8-be24-6164105d48f2",
                "OrgID": 1,
                "TTL": "2026-05-04T12:31:00Z",
                "Data": {
                    "created_on": "2025-05-04T12:31:00.123456789Z",
                    "field": {
                        "key": "gender",
                        "name": "Gender"
                    },
                    "type": "contact_field_changed",
                    "value": {
                        "text": "Female"
                    }
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-47eb-76f8-8768-7d0ba4d4f3e8",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:03.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-1523-76f8-aaa3-04d3fbce5f9a",
                    "status": "completed",
                    "type": "run_ended"
                }
            }
        ]
    }
]