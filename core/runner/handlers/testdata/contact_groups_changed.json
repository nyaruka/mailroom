[
    {
        "label": "#1",
        "actions": {
            "a393abc0-283d-4c9b-a1b3-641a035c34bf": [
                {
                    "type": "add_contact_groups",
                    "uuid": "56b55e4b-ee3e-4408-989d-ee4a7aa68cfb",
                    "groups": [
                        {
                            "uuid": "c153e265-f7c9-4539-9dbc-9b358714b638",
                            "name": "Doctors"
                        }
                    ]
                },
                {
                    "type": "add_contact_groups",
                    "uuid": "dcdd5b7e-2f93-4a33-9fe7-62e006603949",
                    "groups": [
                        {
                            "uuid": "c153e265-f7c9-4539-9dbc-9b358714b638",
                            "name": "Doctors"
                        }
                    ]
                },
                {
                    "type": "remove_contact_groups",
                    "uuid": "70a63813-254e-4fda-8ff1-79fa6e7d964f",
                    "groups": [
                        {
                            "uuid": "c153e265-f7c9-4539-9dbc-9b358714b638",
                            "name": "Doctors"
                        }
                    ]
                },
                {
                    "type": "add_contact_groups",
                    "uuid": "105030fe-20a0-42da-8ac9-6091d0904d1a",
                    "groups": [
                        {
                            "uuid": "5e9d8fab-5e7e-4f51-b533-261af5dea70d",
                            "name": "Testers"
                        }
                    ]
                }
            ],
            "cd024bcd-f473-4719-a00a-bd0bb1190135": [
                {
                    "type": "remove_contact_groups",
                    "uuid": "96ed5d43-65b7-45f3-be68-4e5385edec3a",
                    "groups": [
                        {
                            "uuid": "c153e265-f7c9-4539-9dbc-9b358714b638",
                            "name": "Doctors"
                        }
                    ]
                },
                {
                    "type": "add_contact_groups",
                    "uuid": "f8391106-6537-4385-a51a-6d114274bb33",
                    "groups": [
                        {
                            "uuid": "5e9d8fab-5e7e-4f51-b533-261af5dea70d",
                            "name": "Testers"
                        }
                    ]
                }
            ]
        },
        "db_assertions": [
            {
                "query": "select count(*) from contacts_contactgroup_contacts where contact_id = $1 and contactgroup_id = $2",
                "args": [
                    10000,
                    10005
                ],
                "returns": 0
            },
            {
                "query": "select count(*) from contacts_contactgroup_contacts where contact_id = $1 and contactgroup_id = $2",
                "args": [
                    10000,
                    10006
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contactgroup_contacts where contact_id = $1 and contactgroup_id = $2",
                "args": [
                    10002,
                    10006
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contactgroup_contacts where contact_id = $1 and contactgroup_id = $2",
                "args": [
                    10001,
                    10006
                ],
                "returns": 0
            }
        ],
        "expected_history": [
            {
                "PK": "con#b699a406-7e44-49be-9f01-1a82893e8a10",
                "SK": "evt#01969b47-6343-76f8-a13f-9238de2a0b76",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:10.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-5f5b-76f8-aaa3-04d3fbce5f9a",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#b699a406-7e44-49be-9f01-1a82893e8a10",
                "SK": "evt#01969b47-72e3-76f8-bef6-3979f99a96f9",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:14.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-5f5b-76f8-aaa3-04d3fbce5f9a",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#d709c157-4606-4d41-9df3-9e9c9b4ae2d4",
                "SK": "evt#01969b47-d873-76f8-bfd7-d22404241e07",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:40.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-d48b-76f8-a71b-fe4af29b871a",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#d709c157-4606-4d41-9df3-9e9c9b4ae2d4",
                "SK": "evt#01969b47-e813-76f8-9491-58ccdc93a8a8",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:44.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-d48b-76f8-a71b-fe4af29b871a",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-960b-76f8-8f9d-465efd6fbb5e",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:23.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-9223-76f8-b63d-c8dcc2fa9de0",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-a993-76f8-977d-88574316827e",
                "OrgID": 1,
                "TTL": "2026-05-04T12:31:28Z",
                "Data": {
                    "created_on": "2025-05-04T12:31:28.123456789Z",
                    "groups_added": [
                        {
                            "name": "Testers",
                            "uuid": "5e9d8fab-5e7e-4f51-b533-261af5dea70d"
                        }
                    ],
                    "type": "contact_groups_changed"
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-b54b-76f8-92e8-a5e406ecb2a7",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:31.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-9223-76f8-b63d-c8dcc2fa9de0",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-190b-76f8-b62c-3c781ca3b5da",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:30:51.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-1523-76f8-8e78-3bde7b3370ae",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-2c93-76f8-bec9-e032f4f9af5f",
                "OrgID": 1,
                "TTL": "2026-05-04T12:30:56Z",
                "Data": {
                    "created_on": "2025-05-04T12:30:56.123456789Z",
                    "groups_removed": [
                        {
                            "name": "Doctors",
                            "uuid": "c153e265-f7c9-4539-9dbc-9b358714b638"
                        }
                    ],
                    "type": "contact_groups_changed"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-3463-76f8-9853-0310d032b497",
                "OrgID": 1,
                "TTL": "2026-05-04T12:30:58Z",
                "Data": {
                    "created_on": "2025-05-04T12:30:58.123456789Z",
                    "groups_added": [
                        {
                            "name": "Testers",
                            "uuid": "5e9d8fab-5e7e-4f51-b533-261af5dea70d"
                        }
                    ],
                    "type": "contact_groups_changed"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-401b-76f8-8ab7-4a517a86045c",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:01.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-1523-76f8-8e78-3bde7b3370ae",
                    "status": "completed",
                    "type": "run_ended"
                }
            }
        ]
    }
]