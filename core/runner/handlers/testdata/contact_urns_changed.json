[
    {
        "label": "#1",
        "actions": {
            "a393abc0-283d-4c9b-a1b3-641a035c34bf": [
                {
                    "type": "add_contact_urn",
                    "uuid": "e811ff9b-e70f-40ff-a0b9-0474acdf94c8",
                    "scheme": "tel",
                    "path": "12065551212"
                },
                {
                    "type": "add_contact_urn",
                    "uuid": "d9b42a13-5c58-4ebc-976c-a29fd10da80b",
                    "scheme": "tel",
                    "path": "12065551212"
                },
                {
                    "type": "add_contact_urn",
                    "uuid": "cc166718-15a9-46e3-9087-2ebbeb342eb1",
                    "scheme": "telegram",
                    "path": "11551"
                },
                {
                    "type": "add_contact_urn",
                    "uuid": "537d8030-44d8-4365-a25a-cc29ae9ee911",
                    "scheme": "tel",
                    "path": "+16055741111"
                }
            ],
            "cd024bcd-f473-4719-a00a-bd0bb1190135": []
        },
        "db_assertions": [
            {
                "query": "select count(*) from contacts_contacturn where contact_id = $1 and scheme = 'telegram' and path = '11551' and priority = 998",
                "args": [
                    10000
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contacturn where contact_id = $1 and scheme = 'tel' and path = '+12065551212' and priority = 999 and identity = 'tel:+12065551212'",
                "args": [
                    10000
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contacturn where contact_id = $1 and scheme = 'tel' and path = '+16055741111' and priority = 1000",
                "args": [
                    10000
                ],
                "returns": 1
            },
            {
                "query": "select count(*) from contacts_contacturn where contact_id = $1",
                "args": [
                    10002
                ],
                "returns": 1
            }
        ],
        "expected_history": [
            {
                "PK": "con#b699a406-7e44-49be-9f01-1a82893e8a10",
                "SK": "evt#01969b47-6343-76f8-a13f-9238de2a0b76",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:10.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-5f5b-76f8-aaa3-04d3fbce5f9a",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#b699a406-7e44-49be-9f01-1a82893e8a10",
                "SK": "evt#01969b47-72e3-76f8-bef6-3979f99a96f9",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:14.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-5f5b-76f8-aaa3-04d3fbce5f9a",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#d709c157-4606-4d41-9df3-9e9c9b4ae2d4",
                "SK": "evt#01969b47-d0a3-76f8-a71b-fe4af29b871a",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:38.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-ccbb-76f8-8b56-5e92bbfe0e3f",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#d709c157-4606-4d41-9df3-9e9c9b4ae2d4",
                "SK": "evt#01969b47-e043-76f8-8631-f6b52b12c734",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:42.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-ccbb-76f8-8b56-5e92bbfe0e3f",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-960b-76f8-8f9d-465efd6fbb5e",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:23.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-9223-76f8-b63d-c8dcc2fa9de0",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#cd024bcd-f473-4719-a00a-bd0bb1190135",
                "SK": "evt#01969b47-ad7b-76f8-977d-88574316827e",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:29.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-9223-76f8-b63d-c8dcc2fa9de0",
                    "status": "completed",
                    "type": "run_ended"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-190b-76f8-b62c-3c781ca3b5da",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:30:51.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-1523-76f8-8e78-3bde7b3370ae",
                    "type": "run_started"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-2c93-76f8-bec9-e032f4f9af5f",
                "OrgID": 1,
                "TTL": "2026-05-04T12:30:56Z",
                "Data": {
                    "created_on": "2025-05-04T12:30:56.123456789Z",
                    "type": "contact_urns_changed",
                    "urns": [
                        "tel:+16055741111?id=10000",
                        "tel:+12065551212"
                    ]
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-3463-76f8-9853-0310d032b497",
                "OrgID": 1,
                "TTL": "2026-05-04T12:30:58Z",
                "Data": {
                    "created_on": "2025-05-04T12:30:58.123456789Z",
                    "type": "contact_urns_changed",
                    "urns": [
                        "tel:+16055741111?id=10000",
                        "tel:+12065551212",
                        "telegram:11551"
                    ]
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-401b-76f8-8ab7-4a517a86045c",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:31:01.123456789Z",
                    "flow": {
                        "name": "Test Flow",
                        "revision": 1,
                        "uuid": "9de3663f-c5c5-4c92-9f45-ecbc09abcc85"
                    },
                    "run_uuid": "01969b47-1523-76f8-8e78-3bde7b3370ae",
                    "status": "completed",
                    "type": "run_ended"
                }
            }
        ]
    }
]