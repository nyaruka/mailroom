[
    {
        "label": "error if topic not specified",
        "method": "POST",
        "path": "/mi/ticket/change_topic",
        "body": {
            "org_id": 1,
            "user_id": 2,
            "ticket_uuids": [
                "01992f54-5ab6-717a-a39e-e8ca91fb7262",
                "01992f54-5ab6-7498-a7f2-6aa246e45cfe"
            ]
        },
        "status": 400,
        "response": {
            "error": "request failed validation: field 'topic_uuid' is required"
        }
    },
    {
        "label": "changes the topic of the given tickets",
        "method": "POST",
        "path": "/mi/ticket/change_topic",
        "body": {
            "org_id": 1,
            "user_id": 2,
            "ticket_uuids": [
                "01992f54-5ab6-717a-a39e-e8ca91fb7262",
                "01992f54-5ab6-7498-a7f2-6aa246e45cfe"
            ],
            "topic_uuid": "0a8f2e00-fef6-402c-bd79-d789446ec0e0"
        },
        "status": 200,
        "response": {
            "changed_uuids": [
                "01992f54-5ab6-717a-a39e-e8ca91fb7262",
                "01992f54-5ab6-7498-a7f2-6aa246e45cfe"
            ]
        },
        "db_assertions": [
            {
                "query": "SELECT count(*) FROM tickets_ticket WHERE topic_id = 10002",
                "count": 3
            },
            {
                "query": "SELECT count(*) FROM tickets_ticketevent WHERE event_type = 'T' AND created_by_id = 2 AND topic_id = 10002",
                "count": 2
            }
        ],
        "expected_history": [
            {
                "event": {
                    "uuid": "01969b47-0583-76f8-ae7f-f8b243c49ff5",
                    "type": "ticket_topic_changed",
                    "created_on": "2018-07-06T12:30:00.123456789Z",
                    "ticket_uuid": "01992f54-5ab6-717a-a39e-e8ca91fb7262",
                    "topic": {
                        "uuid": "0a8f2e00-fef6-402c-bd79-d789446ec0e0",
                        "name": "Support"
                    }
                },
                "org_id": 1,
                "contact_uuid": "6393abc0-283d-4c9b-a1b3-641a035c34bf",
                "user_id": 2
            },
            {
                "event": {
                    "uuid": "01969b47-096b-76f8-bd38-d266ec8d3716",
                    "type": "ticket_topic_changed",
                    "created_on": "2018-07-06T12:30:03.123456789Z",
                    "ticket_uuid": "01992f54-5ab6-7498-a7f2-6aa246e45cfe",
                    "topic": {
                        "uuid": "0a8f2e00-fef6-402c-bd79-d789446ec0e0",
                        "name": "Support"
                    }
                },
                "org_id": 1,
                "contact_uuid": "6393abc0-283d-4c9b-a1b3-641a035c34bf",
                "user_id": 2
            }
        ]
    }
]