[
    {
        "label": "illegal method",
        "method": "GET",
        "path": "/mi/msg/search",
        "status": 405,
        "response": {
            "error": "illegal method: GET"
        }
    },
    {
        "label": "missing required fields",
        "method": "POST",
        "path": "/mi/msg/search",
        "body": {},
        "status": 400,
        "response": {
            "error": "request failed validation: field 'org_id' is required, field 'text' is required"
        }
    },
    {
        "label": "invalid org_id",
        "method": "POST",
        "path": "/mi/msg/search",
        "body": {
            "org_id": 1234,
            "text": "hello"
        },
        "status": 500,
        "response": {
            "error": "error loading org assets: error loading environment for org 1234: no org with id: 1234"
        }
    },
    {
        "label": "search matching two messages",
        "method": "POST",
        "path": "/mi/msg/search",
        "body": {
            "org_id": 1,
            "text": "hello"
        },
        "status": 200,
        "response": {
            "total": 2,
            "messages": [
                {
                    "@timestamp": "2025-05-01T13:00:00Z",
                    "org_id": 1,
                    "uuid": "3af672d8-b10f-4bbf-9e3b-f93955fgb95b",
                    "contact_uuid": "b699a406-7e44-49be-9f01-1a82893e8a10",
                    "text": "hello there friend"
                },
                {
                    "@timestamp": "2025-05-01T12:00:00Z",
                    "org_id": 1,
                    "uuid": "2ef672d8-a10f-4aaf-8e2a-e83844efa94a",
                    "contact_uuid": "a393abc0-283d-4c9b-a1b3-641a035c34bf",
                    "text": "hello world"
                }
            ]
        }
    },
    {
        "label": "search matching one message",
        "method": "POST",
        "path": "/mi/msg/search",
        "body": {
            "org_id": 1,
            "text": "goodbye"
        },
        "status": 200,
        "response": {
            "total": 1,
            "messages": [
                {
                    "@timestamp": "2025-05-01T14:00:00Z",
                    "org_id": 1,
                    "uuid": "4bf783e9-c21g-5ccg-af4c-g04a66ghc06c",
                    "contact_uuid": "cd024bcd-f473-4719-a00a-bd0bb1190135",
                    "text": "goodbye world"
                }
            ]
        }
    },
    {
        "label": "search matching no messages",
        "method": "POST",
        "path": "/mi/msg/search",
        "body": {
            "org_id": 1,
            "text": "xyznotfound"
        },
        "status": 200,
        "response": {
            "total": 0,
            "messages": []
        }
    }
]
