[
    {
        "label": "illegal method",
        "method": "GET",
        "path": "/mi/msg/delete",
        "status": 405,
        "response": {
            "error": "illegal method: GET"
        }
    },
    {
        "label": "response is empty",
        "method": "POST",
        "path": "/mi/msg/delete",
        "body": {
            "org_id": 1,
            "user_id": 3,
            "msg_uuids": [
                "0199bad8-f98d-75a3-b641-2718a25ac3f5",
                "0199bad9-9791-770d-a47d-8f4a6ea3ad13"
            ]
        },
        "status": 200,
        "response": {},
        "db_assertions": [
            {
                "query": "SELECT visibility, text FROM msgs_msg WHERE uuid = '0199bad8-f98d-75a3-b641-2718a25ac3f5'",
                "columns": {
                    "text": "",
                    "visibility": "D"
                }
            },
            {
                "query": "SELECT visibility, text FROM msgs_msg WHERE uuid = '0199bad9-9791-770d-a47d-8f4a6ea3ad13'",
                "columns": {
                    "text": "",
                    "visibility": "D"
                }
            },
            {
                "query": "SELECT visibility, text FROM msgs_msg WHERE uuid = '0199bad9-f0bc-7738-8af8-99712a6f8bff'",
                "columns": {
                    "text": "3",
                    "visibility": "V"
                }
            }
        ],
        "expected_history": [
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-0583-76f8-ae7f-f8b243c49ff5",
                "OrgID": 1,
                "TTL": "2025-05-05T12:30:46Z",
                "Data": {
                    "_user": {
                        "name": "Andy Admin",
                        "uuid": "e29fdf9f-56ab-422a-b77d-e3ec26091a25"
                    },
                    "created_on": "2025-05-04T12:30:46.123456789Z",
                    "msg_uuid": "0199bad9-9791-770d-a47d-8f4a6ea3ad13",
                    "type": "msg_deleted"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#01969b47-0d53-76f8-bd38-d266ec8d3716",
                "OrgID": 1,
                "TTL": "2025-05-05T12:30:48Z",
                "Data": {
                    "_user": {
                        "name": "Andy Admin",
                        "uuid": "e29fdf9f-56ab-422a-b77d-e3ec26091a25"
                    },
                    "created_on": "2025-05-04T12:30:48.123456789Z",
                    "msg_uuid": "0199bad8-f98d-75a3-b641-2718a25ac3f5",
                    "type": "msg_deleted"
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#0199bad8-f98d-75a3-b641-2718a25ac3f5#del",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:30:50.123456789Z",
                    "_user": {
                        "name": "Andy Admin",
                        "uuid": "e29fdf9f-56ab-422a-b77d-e3ec26091a25"
                    }
                }
            },
            {
                "PK": "con#a393abc0-283d-4c9b-a1b3-641a035c34bf",
                "SK": "evt#0199bad9-9791-770d-a47d-8f4a6ea3ad13#del",
                "OrgID": 1,
                "Data": {
                    "created_on": "2025-05-04T12:30:49.123456789Z",
                    "_user": {
                        "name": "Andy Admin",
                        "uuid": "e29fdf9f-56ab-422a-b77d-e3ec26091a25"
                    }
                }
            }
        ]
    }
]